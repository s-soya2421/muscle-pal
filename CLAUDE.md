# MusclePal - Claude開発ガイド

## 📋 プロジェクト概要

**MusclePal**は、フィットネス愛好者が互いにつながり、支え合い、共に成長できる包括的なソーシャルプラットフォームです。

### 🎯 ミッション
フィットネス愛好者同士の真のつながりを創造し、一人では難しい目標も仲間と一緒に達成できる環境を提供する。

### 🔧 技術スタック
- **フロントエンド**: Next.js 15.4.6 (App Router), TypeScript, Tailwind CSS
- **UIライブラリ**: shadcn/ui + Radix UI, Lucide React
- **バックエンド**: Supabase (PostgreSQL, Auth, Storage, Realtime)
- **インフラ**: Vercel (ホスティング)

## 🏗️ プロジェクト構造

```
src/
├── app/                  # Next.js App Router
│   ├── dashboard/        # ダッシュボードページ ✅
│   ├── layout.tsx        # メインレイアウト
│   └── page.tsx          # ランディングページ ✅
├── components/           # Reactコンポーネント
│   └── ui/              # shadcn/uiコンポーネント
├── lib/                 # ユーティリティとライブラリ
│   ├── supabase/        # Supabase設定
│   ├── mock-data.ts     # モックデータ ✅
│   └── utils.ts         # ユーティリティ関数
└── middleware.ts        # Next.jsミドルウェア
```

## 🚀 開発コマンド

```bash
# 開発サーバー起動
npm run dev

# ビルド & 型チェック
npm run build

# ESLint検証
npm run lint

# 本番サーバー起動
npm start

# テスト実行
npm run test

# テスト（ウォッチモード）
npm run test:watch

# テスト（カバレッジ付き）
npm run test:coverage

# CI用テスト実行
npm run test:ci
```

## 📱 実装済み機能

### ✅ ランディングページ (`/`)
- ヒーローセクション
- 機能紹介（ソーシャルネットワーク、セッション、チャレンジ）
- ビジョン説明
- CTA（行動喚起）

### ✅ 認証システム (`/login`, `/signup`)
- **ユーザー登録**: メール・パスワード・氏名による登録
- **ログイン**: メール・パスワード認証
- **AuthContext**: アプリ全体での認証状態管理
- **エラーハンドリング**: 詳細なエラーメッセージ表示
- **認証保護**: ミドルウェアによるルート保護
- **テスト**: Jest + React Testing Libraryによるテスト実装

### ✅ ダッシュボードページ (`/dashboard`)
- **認証**: サーバーサイドSupabase認証チェック
- **3カラムレスポンシブレイアウト**:
  - 左: ユーザープロフィール、統計、クイックアクション
  - 中央: ウェルカムメッセージ、ソーシャルタイムライン
  - 右: 参加予定セッション、チャレンジ、おすすめユーザー
- **インタラクティブ機能**:
  - いいね・コメント・シェア機能
  - セッション参加予定表示
  - チャレンジ進捗バー
  - おすすめユーザーフォロー機能
- **モバイル対応**: 5タブボトムナビゲーション
- **ローディング**: Suspenseとスケルトンコンポーネント

### ✅ モックデータシステム (`/src/lib/mock-data.ts`)
- **ユーザー**: 田中太郎（中級者）、佐藤健（上級者）、山田花子（初心者）
- **投稿**: リアルなフィットネス投稿（PR達成、ヨガセッション等）
- **セッション**: 朝活ヨガ、筋トレ、ランニングクラブ
- **チャレンジ**: プランク30日、週5日運動、10000歩ウォーキング
- **おすすめユーザー**: 専門分野別の提案

### ✅ テスト環境
- **単体テスト**: 認証機能・コンテキスト・エラーハンドリング
- **設定**: Jest + React Testing Library + TypeScript
- **カバレッジ**: テストカバレッジ計測機能

## 🎨 デザイン指針

### カラーパレット
- **メインカラー**: `blue-600` (Fitness Blue)
- **アクセント**: `orange-600` (Energy Orange)
- **機能別色分け**:
  - 🟢 セッション: `green-600`
  - 🟠 チャレンジ: `orange-600`
  - 🟣 ユーザー: `purple-600`

### レスポンシブブレイクポイント
- **モバイル**: `375px-768px`
- **タブレット**: `768px-1024px`
- **デスクトップ**: `1024px+`

### アクセシビリティ
- WCAG 2.1 AA準拠
- キーボード操作対応
- 適切なaria属性使用

## 💻 開発ワークフロー

### 1. 新機能開発前
```bash
# 最新の変更を確認
git status
git pull origin main

# 開発サーバー起動
npm run dev
```

### 2. 開発中
```bash
# 型チェック
npm run build

# コード品質チェック
npm run lint
```

### 3. 開発完了後
```bash
# 最終チェック
npm run build
npm run lint

# Git操作
git add .
git commit -m "feat: 新機能の説明"
git push
```

## 🔮 今後の実装予定

### Phase 1: MVP機能（基本完了）
- [x] ユーザー登録・ログイン画面
- [x] ダッシュボード基本機能
- [ ] プロフィール編集機能
- [ ] 投稿作成・編集機能
- [ ] 実際のデータベース連携（モック→実データ）

### Phase 2: コミュニティ機能
- [ ] トレーニングセッション作成・参加
- [ ] リアルタイムチャット
- [ ] フォロー・フォロワー機能
- [ ] いいね・コメント機能の実装

### Phase 3: チャレンジ機能
- [ ] チャレンジ作成・参加
- [ ] 進捗トラッキング
- [ ] バッジ・報酬システム

### Phase 4: 高度な機能
- [ ] 検索・発見機能
- [ ] 通知システム
- [ ] プロフィール画像アップロード
- [ ] データ分析・レポート機能

## 🛠️ 開発時の注意事項

### コーディング規約
- **コンポーネント**: PascalCase
- **ファイル**: kebab-case
- **変数・関数**: camelCase
- **定数**: UPPER_SNAKE_CASE

### インポート順序
```typescript
// 1. React/Next.js
import { useState } from 'react';
import Link from 'next/link';

// 2. 外部ライブラリ
import { Button } from '@/components/ui/button';

// 3. 内部ライブラリ
import { createClient } from '@/lib/supabase/server';

// 4. アイコン
import { Dumbbell, Users } from 'lucide-react';
```

### 型定義
- すべての関数に戻り値の型を明示
- PropsにはInterfaceを使用
- モックデータには専用の型定義を使用

## 🐛 既知の課題・技術的負債

1. **データベース連携**: 現在はモックデータを使用、実際のSupabaseデータベースとの連携が必要
2. **認証状態の永続化**: リフレッシュ時の認証状態保持の改善
3. **パフォーマンス**: 大量データ対応（仮想化、ページネーション）
4. **オフライン対応**: PWA機能の追加検討

## 📞 サポート・問い合わせ

開発中に問題が発生した場合：
1. `npm run build`で型エラーをチェック
2. `npm run lint`でコード品質を確認
3. コンソールエラーを確認
4. 必要に応じてプロジェクトメモリファイルを参照

## 📈 開発進捗状況

### 完了した主要機能
- ✅ **ランディングページ**: フル機能実装済み
- ✅ **認証システム**: サインアップ・ログイン・状態管理完了
- ✅ **ダッシュボード**: 3カラムレイアウト・レスポンシブ対応完了
- ✅ **モックデータ**: リアルなフィットネスデータ構築完了
- ✅ **テスト環境**: Jest + React Testing Library設定完了

### 品質指標
- **ビルド**: ✅ エラーなし
- **ESLint**: ✅ 警告・エラーなし
- **TypeScript**: ✅ 型安全性確保
- **テスト**: ✅ 認証系テスト実装済み

---

**Last Updated**: 2025-08-12  
**Version**: 1.1  
**Status**: MVP Phase 1 基本完了 / Phase 2 準備中